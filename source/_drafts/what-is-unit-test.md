---
title: 什么是单元测试
toc: true
sidebar: true
date: 2020-05-29 16:55:38
tags:
- 测试
- 单元测试

categories:
- 测试
---

当我打算了解单元测试的时候，很大的一个动因是：部门把BUG量和绩效挂钩了，为了保住我的钱和我的头发，编写单元测试，就成了一个不可绕开的环节。

### 什么是单元测试
所以第一件事，我需要搞清楚，到底什么是单元测试？
> 针对代码最小单元的测试，可以称之为单元测试。代码的最小单元可以是一个函数，一个功能组件，这取决于你编写代码的方式和代码组织的结构。如果你是函数式编程，单元可以是一个函数，如果是面想对象编程，他可以是一个类，也可以是类中的方法，如果编写一个`vue`组件，单元就可以是组件，也可以是组件中部分功能。这取决你编写单元测试的意图。


### 为什么要写单元测试
有一种[我非常赞同的隐喻](https://mp.weixin.qq.com/s?__biz=MzA5MTAzNjU1OQ==&mid=2454779818&idx=1&sn=0c91a9b637a7a7ecf1c2d30e94d521b1&chksm=87a6d94ab0d1505c90c8f3f495402aa76f50fe42df3c4660e775670be8833c10c377956cccae&mpshare=1&scene=21&srcid=&rd2werd=1#wechat_redirect)，单元测试是保证你写的代码是你想要的结果的最有效的方法！
> 没有完备的单元测试的代码所构成的⼀个系统，就像组装⼀架飞机，各个配件没有分别经过严格检验，只在最后组装好后，再通过试飞来检验飞机是否正常⼀样。

单元测试的威力更多不是体现在新代码的编写上，而是对已有代码的更改。当你对一个已有功能进行重构时，你很难保证，新代码覆盖了源代码的方法面面。但是单元测试的存在，在你重构代码后并通过所有的case，你可以自豪的说，新的修改满足了原有逻辑的所有关键点。

当一个系统的功能复杂到超过了你的记忆能力和逻辑能力，你必须依靠工具来保证，你的任何修改都不会产生意想不到的副作用。

在目前公司参与的项目中，经常性的会出现以下一些情况：
- 代码逻辑修改遗漏，一部分逻辑修改了，忘掉了另外一些。
- 修改部分代码功能时，会影响到一些无关的内容
- 修改组件的功能，有一些逻辑需要修改，但是这个逻辑在系统很多地方应用，不敢乱动
- 系统中很久之前新增了一部分逻辑，这部分逻辑已经很久远了，不记得为什么要添加他
- 系统提测后，增量修改的代码和功能，都需要全局测试，开发人员没有办法保证修改的内容对已有功能没有影响。

面对这些问题，我们尝试过添加详尽的注释，提交代码时编写完善的提交日志。即便如此，日积月累之后，不断累计的修改内容，还是让修改公共功能代码时，开发人员无法确保代码的影响范围以及没有未知的副作用。

> 单元测试是所有测试中最底层的一类测试，是第一个环节，也是最重要的一个环节，是唯一一次有保证能够代码覆盖率达到100%的测试，是整个软件测试过程的基础和前提，单元测试防止了开发的后期因bug过多而失控，单元测试的性价比是最好的

### 单元测试应该包含哪些内容
所以，单元测试应该是什么样的，他应该怎么去写？


### 如何写好一个单元测试

编写单元测试的原则


### 相关话题

- 如何编写易于

### 参考

[单元测试到底是什么？应该怎么做？](https://www.zhihu.com/question/28729261)
[干货 | 测试扁平化之必备神器：好的单元测试](https://mp.weixin.qq.com/s?__biz=MzA5MTAzNjU1OQ==&mid=2454779818&idx=1&sn=0c91a9b637a7a7ecf1c2d30e94d521b1&chksm=87a6d94ab0d1505c90c8f3f495402aa76f50fe42df3c4660e775670be8833c10c377956cccae&mpshare=1&scene=21&srcid=&rd2werd=1#wechat_redirect)
